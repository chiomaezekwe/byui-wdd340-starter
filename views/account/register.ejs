<div class="form-container">
    <h1><%= title %></h1>
    <% if (flash.notice && flash.notice.length) { %>
      <div class="notice"><%= flash.notice[0] %></div>
    <% } %>

    <% if (errors) { %>
      <ul class="notice">
    <% errors.array().forEach(error => { %>
      <li><%= error.msg %></li>
    <%  }) %>
      </ul>
    <% } %>

  <form action="/account/register" method="POST" class="register-form">
    <label for="account_firstname">First Name:</label>
    <input 
      type="text" 
      id="account_firstname" 
      name="account_firstname" 
      required 
      <% if (typeof account_firstname !== 'undefined') { %>
        value="<%= account_firstname %>"
      <% } %>
    >

    <label for="account_lastname">Last Name:</label>
    <input 
      type="text" 
      id="account_lastname" 
      name="account_lastname" 
      required 
      <% if (typeof account_lastname !== 'undefined') { %>
        value="<%= account_lastname %>"
      <% } %>
    >

    <label for="account_email">Email:</label>
    <input 
      type="email" 
      id="account_email" 
      name="account_email" 
      required 
      <% if (typeof account_email !== 'undefined') { %>
        value="<%= account_email %>"
      <% } %>
    >

    <label for="account_password">Password:</label>
    <input 
      type="password" 
      id="account_password" 
      name="account_password" 
      required
      pattern="^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[^a-zA-Z0-9])(?!.*\s).{12,}$"
      title="Must be at least 12 characters and contain 1 capital letter, 1 number, and 1 special character." 
    >

    <div class="password-toggle">
      <input type="checkbox" id="togglePassword" >
      <label for="togglePassword">Show Password</label>
    </div>

    <button type="submit">Register</button>
  </form>
</div>

<script>
  // Optional: Password toggle functionality
  document.getElementById('togglePassword').addEventListener('change', function () {
    const pwd = document.getElementById('account_password')
    pwd.type = this.checked ? 'text' : 'password'
  })
</script>
